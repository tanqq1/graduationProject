<mxfile host="app.diagrams.net" modified="2021-06-21T10:56:42.129Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36" etag="l36FVhbmkXf15zGj6IXB" version="14.8.0" type="github">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Immer 源码">
    <mxGraphModel dx="1525" dy="796" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="nkPAldrCDChmKuOqDMVw-0" value="redux-toolkit / createSlice" style="swimlane;startSize=20;horizontal=0;childLayout=treeLayout;horizontalTree=1;resizable=0;containerType=tree;strokeColor=#82b366;fillColor=#d5e8d4;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="260" y="300" width="890" height="569" as="geometry">
            <mxRectangle x="260" y="300" width="50" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-1" value="createSlice" style="whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="40" y="150.892" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-2" value="createAction" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="190" y="20" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-3" value="" style="edgeStyle=elbowEdgeStyle;elbow=horizontal;html=1;rounded=0;" edge="1" parent="nkPAldrCDChmKuOqDMVw-0" source="nkPAldrCDChmKuOqDMVw-1" target="nkPAldrCDChmKuOqDMVw-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-4" value="createReducer" style="whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="190" y="281.784" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-5" value="" style="edgeStyle=elbowEdgeStyle;elbow=horizontal;html=1;rounded=0;" edge="1" parent="nkPAldrCDChmKuOqDMVw-0" source="nkPAldrCDChmKuOqDMVw-1" target="nkPAldrCDChmKuOqDMVw-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-21" value="" style="edgeStyle=elbowEdgeStyle;elbow=horizontal;html=1;rounded=0;" edge="1" target="nkPAldrCDChmKuOqDMVw-22" source="nkPAldrCDChmKuOqDMVw-4" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="400" y="374.08399999999995" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-22" value="" style="whiteSpace=wrap;html=1;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="340" y="54.553999999999974" width="530" height="494.46" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-24" value="caseReducer?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="400" y="165.192" width="130" height="41.59" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-25" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;" edge="1" source="nkPAldrCDChmKuOqDMVw-24" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="580" y="186.78" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-26" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;" edge="1" source="nkPAldrCDChmKuOqDMVw-24" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="465" y="285.192" as="targetPoint" />
            <Array as="points">
              <mxPoint x="465" y="267.192" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-28" value="return previousState" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="590" y="158.372" width="140" height="48.41" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF0000;" edge="1" parent="nkPAldrCDChmKuOqDMVw-0" source="nkPAldrCDChmKuOqDMVw-29" target="nkPAldrCDChmKuOqDMVw-39">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-29" value="preState 是草稿？" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="383.75" y="285.192" width="156.25" height="50" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-32" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF0000;" edge="1" source="nkPAldrCDChmKuOqDMVw-29" target="nkPAldrCDChmKuOqDMVw-33" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF0000;" edge="1" parent="nkPAldrCDChmKuOqDMVw-0" source="nkPAldrCDChmKuOqDMVw-33" target="nkPAldrCDChmKuOqDMVw-46">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF0000;" edge="1" parent="nkPAldrCDChmKuOqDMVw-0" source="nkPAldrCDChmKuOqDMVw-33" target="nkPAldrCDChmKuOqDMVw-49">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-33" value="preState 数据是基本类型" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="380.62" y="395.76599999999996" width="162.5" height="60.97" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-34" value="yes" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="560" y="285.19199999999995" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-39" value="&lt;span&gt;return caseReducer(prevState) || prevState&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#82b366;fillColor=#d5e8d4;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="600" y="289.07" width="250" height="42.24" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-45" value="no" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="460" y="355.762" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-27" value="&lt;div style=&quot;color: rgb(197 , 200 , 198) ; font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(152 , 114 , 162)&quot;&gt;return&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;caseReducers&lt;/span&gt;.&lt;span style=&quot;color: rgb(206 , 103 , 0)&quot;&gt;reduce&lt;/span&gt;((&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;prevState&lt;/span&gt;,&amp;nbsp;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;caseReducer&lt;/span&gt;),initalState)&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="400" y="119.99599999999998" width="420" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-46" value="return caseReducer(preState,action)" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#82b366;fillColor=#d5e8d4;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="610" y="402.896" width="210" height="46.71" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-48" value="yes" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="550" y="402.89599999999996" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-49" value="return produce(prevState,(draft) =&amp;gt; caseReducer(draft,action))" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#82b366;fillColor=#d5e8d4;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="490" y="484.308" width="350" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-57" value="no" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry x="360" y="464.308" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="nkPAldrCDChmKuOqDMVw-0" target="nkPAldrCDChmKuOqDMVw-0">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-60" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;strokeColor=#67AB9F;strokeWidth=6;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="nkPAldrCDChmKuOqDMVw-49">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="925" y="1120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-61" value="Immer class" style="swimlane;startSize=20;horizontal=1;childLayout=treeLayout;horizontalTree=0;resizable=0;containerType=tree;strokeColor=#10739e;fillColor=#b1ddf0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="320" y="1130" width="1217" height="1000" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-78" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=1;strokeColor=#4D4D4D;" edge="1" parent="nkPAldrCDChmKuOqDMVw-61" source="nkPAldrCDChmKuOqDMVw-62" target="nkPAldrCDChmKuOqDMVw-77">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-62" value="&lt;span style=&quot;line-height: 130%&quot;&gt;&lt;b&gt;produce API&lt;/b&gt;&lt;br&gt;&lt;/span&gt;&lt;div style=&quot;color: rgb(197 , 200 , 198) ; font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;color: rgb(206 , 103 , 0)&quot;&gt;produce&lt;/span&gt;&lt;span style=&quot;color: rgb(103 , 104 , 103)&quot;&gt;:&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(155 , 0 , 0)&quot;&gt;IProduce&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(103 , 104 , 103)&quot;&gt;=&lt;/span&gt;&amp;nbsp;(&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;base&lt;/span&gt;&lt;span style=&quot;color: rgb(103 , 104 , 103)&quot;&gt;:&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(199 , 68 , 74)&quot;&gt;any&lt;/span&gt;,&amp;nbsp;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;recipe&lt;/span&gt;&lt;span style=&quot;color: rgb(103 , 104 , 103)&quot;&gt;?:&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(199 , 68 , 74)&quot;&gt;any&lt;/span&gt;,&amp;nbsp;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;patchListener&lt;/span&gt;&lt;span style=&quot;color: rgb(103 , 104 , 103)&quot;&gt;?:&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(199 , 68 , 74)&quot;&gt;any&lt;/span&gt;)&amp;nbsp;&lt;span style=&quot;color: rgb(152 , 114 , 162)&quot;&gt;=&amp;gt;&lt;/span&gt;&amp;nbsp;{}&amp;nbsp;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="356.6538700000001" y="40" width="840" height="50" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-77" value="isFunction(base) &amp;amp;&amp;amp; ! isFunction(recipe)" style="rhombus;whiteSpace=wrap;html=1;shadow=0;strokeColor=#b46504;fillColor=#fad7ac;rounded=0;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="628.2688700000001" y="140" width="296.77" height="110" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-86" value="&amp;nbsp;&amp;nbsp;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=0;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="20" y="150" width="30" height="10" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-85" value="&lt;div style=&quot;color: rgb(197 , 200 , 198) ; font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px ; line-height: 19px&quot;&gt;.&lt;span style=&quot;color: rgb(206 , 103 , 0)&quot;&gt;produce&lt;/span&gt;(&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;recipe&lt;/span&gt;,&amp;nbsp;(&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;draft&lt;/span&gt;&lt;span style=&quot;color: rgb(103 , 104 , 103)&quot;&gt;:&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(155 , 0 , 0)&quot;&gt;Drafted&lt;/span&gt;)&amp;nbsp;&lt;span style=&quot;color: rgb(152 , 114 , 162)&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(197 , 200 , 198) ; font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px ; line-height: 19px&quot;&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;base&lt;/span&gt;.&lt;span style=&quot;color: rgb(206 , 103 , 0)&quot;&gt;call&lt;/span&gt;(&lt;span style=&quot;color: rgb(199 , 68 , 74)&quot;&gt;this&lt;/span&gt;,&amp;nbsp;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;draft&lt;/span&gt;,&amp;nbsp;&lt;span style=&quot;color: rgb(103 , 104 , 103)&quot;&gt;...&lt;/span&gt;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;args&lt;/span&gt;))&lt;/div&gt;" style="text;html=1;strokeColor=#36393d;fillColor=#cce5ff;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=0;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="420" y="110" width="287.49" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-87" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=1;strokeColor=#4D4D4D;" edge="1" target="nkPAldrCDChmKuOqDMVw-88" source="nkPAldrCDChmKuOqDMVw-77" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="610" y="1130" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-88" value="&amp;nbsp;! isFunction(recipe)" style="rhombus;whiteSpace=wrap;html=1;shadow=0;strokeColor=#b46504;fillColor=#fad7ac;rounded=0;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="656.1538700000001" y="300" width="241" height="100" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-89" value="no" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=0;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="780" y="260" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-92" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=1;strokeColor=#4D4D4D;" edge="1" target="nkPAldrCDChmKuOqDMVw-93" source="nkPAldrCDChmKuOqDMVw-88" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="610" y="1250" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-93" value="&lt;span style=&quot;color: rgb(96 , 137 , 180) ; font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px&quot;&gt;die(6)&lt;/span&gt;" style="rhombus;whiteSpace=wrap;html=1;shadow=0;strokeColor=#b46504;fillColor=#fad7ac;rounded=0;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="942.1518400000001" y="450" width="122.49" height="90" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-103" value="yes" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="960.0050000000001" y="400" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-115" value="no" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="700" y="400" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-181" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=1;strokeColor=#4D4D4D;" edge="1" target="nkPAldrCDChmKuOqDMVw-182" source="nkPAldrCDChmKuOqDMVw-88" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="929.1620000000003" y="1290" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-182" value="&lt;div style=&quot;color: rgb(197 , 200 , 198) ; font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;patchListener &amp;amp;&amp;amp;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(197 , 200 , 198) ; font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;!isFunction(&lt;/span&gt;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;patchListener&lt;/span&gt;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;) ?&lt;/span&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;shadow=0;strokeColor=#b46504;fillColor=#fad7ac;rounded=0;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="488.6659000000001" y="450" width="393.68" height="100" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-183" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=1;strokeColor=#4D4D4D;" edge="1" target="nkPAldrCDChmKuOqDMVw-184" source="nkPAldrCDChmKuOqDMVw-182" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="929.1619999999998" y="1440" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-184" value="&lt;div style=&quot;color: rgb(197 , 200 , 198) ; font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;die(7)&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;shadow=0;strokeColor=#b46504;fillColor=#fad7ac;rounded=0;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="737.1358" y="600" width="178.22" height="50" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-185" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=1;strokeColor=#4D4D4D;" edge="1" target="nkPAldrCDChmKuOqDMVw-186" source="nkPAldrCDChmKuOqDMVw-182" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="929.1619999999998" y="1440" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-186" value="&lt;div style=&quot;color: rgb(197 , 200 , 198) ; font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 19px&quot;&gt;&lt;span style=&quot;color: rgb(206 , 103 , 0)&quot;&gt;isDraftable&lt;/span&gt;(&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;base&lt;/span&gt;)&lt;/div&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;shadow=0;strokeColor=#b46504;fillColor=#fad7ac;rounded=0;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="455.65600000000006" y="600" width="209.09" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-189" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=1;strokeColor=#4D4D4D;" edge="1" target="nkPAldrCDChmKuOqDMVw-190" source="nkPAldrCDChmKuOqDMVw-186" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1015.4515000000001" y="1590" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-190" value="&lt;div style=&quot;color: rgb(197 , 200 , 198) ; font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 19px&quot;&gt;&lt;span style=&quot;color: rgb(206 , 103 , 0)&quot;&gt;isDraftable&lt;/span&gt;(&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;base&lt;/span&gt;)&lt;/div&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;shadow=0;strokeColor=#b46504;fillColor=#fad7ac;rounded=0;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="617.605" y="730" width="209.09" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-193" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=1;strokeColor=#4D4D4D;" edge="1" target="nkPAldrCDChmKuOqDMVw-194" source="nkPAldrCDChmKuOqDMVw-186" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1015.4515000000001" y="1590" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-194" value="&lt;div style=&quot;color: rgb(197 , 200 , 198) ; font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 19px&quot;&gt;&lt;div style=&quot;font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 19px&quot;&gt;&lt;span style=&quot;color: rgb(103 , 104 , 103)&quot;&gt;!&lt;/span&gt;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;base&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(103 , 104 , 103)&quot;&gt;||&lt;/span&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 19px&quot;&gt;&lt;span style=&quot;color: rgb(103 , 104 , 103)&quot;&gt;typeof&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;base&lt;/span&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 19px&quot;&gt;&lt;span style=&quot;color: rgb(103 , 104 , 103)&quot;&gt;!==&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(154 , 168 , 58)&quot;&gt;&quot;object&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;shadow=0;strokeColor=#b46504;fillColor=#fad7ac;rounded=0;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="293.707" y="730" width="234.08" height="100" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-197" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=1;strokeColor=#4D4D4D;" edge="1" target="nkPAldrCDChmKuOqDMVw-198" source="nkPAldrCDChmKuOqDMVw-194" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1140.7523499999998" y="1720" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-198" value="&lt;div style=&quot;font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 19px&quot;&gt;&lt;font color=&quot;#ce6700&quot;&gt;die(21,base)&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;shadow=0;strokeColor=#b46504;fillColor=#fad7ac;rounded=0;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="443.24199999999996" y="880" width="209.09" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-199" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=1;strokeColor=#4D4D4D;" edge="1" target="nkPAldrCDChmKuOqDMVw-200" source="nkPAldrCDChmKuOqDMVw-194" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1142.3766999999998" y="1720" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-200" value="&lt;div style=&quot;font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div style=&quot;font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 19px&quot;&gt;&lt;div style=&quot;font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 19px&quot;&gt;&lt;font color=&quot;#676867&quot;&gt;-------&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;shadow=0;strokeColor=#B20000;fillColor=#e51400;rounded=0;fontColor=#ffffff;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="169.16199999999992" y="880" width="234.08" height="100" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-187" value="yes" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="730" y="550" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-188" value="no&lt;br&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="622.33" y="550" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-204" value="yes" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="690" y="680" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-203" value="no" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="477" y="680" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-201" value="no" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="470" y="830" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-202" value="yes" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="350" y="830" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-128" value="yes" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;" vertex="1" parent="nkPAldrCDChmKuOqDMVw-61">
          <mxGeometry x="356.65" y="140" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-76" value="&lt;h1&gt;&lt;div style=&quot;color: rgb(197 , 200 , 198) ; background-color: rgb(30 , 30 , 30) ; font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-weight: normal ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #9872a2&quot;&gt;const&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;frozenInitialState&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #676867&quot;&gt;=&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #ce6700&quot;&gt;createNextState&lt;/span&gt;(&lt;span style=&quot;color: #6089b4&quot;&gt;initialState&lt;/span&gt;,&amp;nbsp;()&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;=&amp;gt;&lt;/span&gt;&amp;nbsp;{})&lt;/div&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;return&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;function&lt;/span&gt;&amp;nbsp;(&lt;span style=&quot;color: #6089b4&quot;&gt;state&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #676867&quot;&gt;=&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;frozenInitialState&lt;/span&gt;,&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;action&lt;/span&gt;)&lt;span style=&quot;color: #676867&quot;&gt;:&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #9b0000&quot;&gt;S&lt;/span&gt;&amp;nbsp;{&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;let&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;caseReducers&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #676867&quot;&gt;=&lt;/span&gt;&amp;nbsp;[&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;actionsMap&lt;/span&gt;[&lt;span style=&quot;color: #6089b4&quot;&gt;action&lt;/span&gt;.&lt;span style=&quot;color: #9872a2&quot;&gt;type&lt;/span&gt;],&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #676867&quot;&gt;...&lt;/span&gt;&lt;span style=&quot;color: #6089b4&quot;&gt;finalActionMatchers&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.&lt;span style=&quot;color: #ce6700&quot;&gt;filter&lt;/span&gt;(({&amp;nbsp;&lt;span style=&quot;color: #ce6700&quot;&gt;matcher&lt;/span&gt;&amp;nbsp;})&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;=&amp;gt;&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #ce6700&quot;&gt;matcher&lt;/span&gt;(&lt;span style=&quot;color: #6089b4&quot;&gt;action&lt;/span&gt;))&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.&lt;span style=&quot;color: #ce6700&quot;&gt;map&lt;/span&gt;(({&amp;nbsp;&lt;span style=&quot;color: #ce6700&quot;&gt;reducer&lt;/span&gt;&amp;nbsp;})&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;=&amp;gt;&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #ce6700&quot;&gt;reducer&lt;/span&gt;),&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;]&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;if&lt;/span&gt;&amp;nbsp;(&lt;span style=&quot;color: #6089b4&quot;&gt;caseReducers&lt;/span&gt;.&lt;span style=&quot;color: #ce6700&quot;&gt;filter&lt;/span&gt;((&lt;span style=&quot;color: #ce6700&quot;&gt;cr&lt;/span&gt;)&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;=&amp;gt;&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #676867&quot;&gt;!!&lt;/span&gt;&lt;span style=&quot;color: #ce6700&quot;&gt;cr&lt;/span&gt;).&lt;span style=&quot;color: #c7444a&quot;&gt;length&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #676867&quot;&gt;===&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;0&lt;/span&gt;)&amp;nbsp;{&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;caseReducers&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #676867&quot;&gt;=&lt;/span&gt;&amp;nbsp;[&lt;span style=&quot;color: #ce6700&quot;&gt;finalDefaultCaseReducer&lt;/span&gt;]&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;/div&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;return&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;caseReducers&lt;/span&gt;.&lt;span style=&quot;color: #ce6700&quot;&gt;reduce&lt;/span&gt;((&lt;span style=&quot;color: #6089b4&quot;&gt;previousState&lt;/span&gt;,&amp;nbsp;&lt;span style=&quot;color: #ce6700&quot;&gt;caseReducer&lt;/span&gt;)&lt;span style=&quot;color: #676867&quot;&gt;:&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #9b0000&quot;&gt;S&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;=&amp;gt;&lt;/span&gt;&amp;nbsp;{&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;if&lt;/span&gt;&amp;nbsp;(&lt;span style=&quot;color: #ce6700&quot;&gt;caseReducer&lt;/span&gt;)&amp;nbsp;{&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;if&lt;/span&gt;&amp;nbsp;(&lt;span style=&quot;color: #ce6700&quot;&gt;isDraft&lt;/span&gt;(&lt;span style=&quot;color: #6089b4&quot;&gt;previousState&lt;/span&gt;))&amp;nbsp;{&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9a9b99&quot;&gt;//&amp;nbsp;If&amp;nbsp;it&#39;s&amp;nbsp;already&amp;nbsp;a&amp;nbsp;draft,&amp;nbsp;we&amp;nbsp;must&amp;nbsp;already&amp;nbsp;be&amp;nbsp;inside&amp;nbsp;a&amp;nbsp;`createNextState`&amp;nbsp;call,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9a9b99&quot;&gt;//&amp;nbsp;likely&amp;nbsp;because&amp;nbsp;this&amp;nbsp;is&amp;nbsp;being&amp;nbsp;wrapped&amp;nbsp;in&amp;nbsp;`createReducer`,&amp;nbsp;`createSlice`,&amp;nbsp;or&amp;nbsp;nested&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9a9b99&quot;&gt;//&amp;nbsp;inside&amp;nbsp;an&amp;nbsp;existing&amp;nbsp;draft.&amp;nbsp;It&#39;s&amp;nbsp;safe&amp;nbsp;to&amp;nbsp;just&amp;nbsp;pass&amp;nbsp;the&amp;nbsp;draft&amp;nbsp;to&amp;nbsp;the&amp;nbsp;mutator.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;const&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;draft&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #676867&quot;&gt;=&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;previousState&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;as&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #9b0000&quot;&gt;Draft&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #9b0000&quot;&gt;S&lt;/span&gt;&amp;gt;&amp;nbsp;&lt;span style=&quot;color: #9a9b99&quot;&gt;//&amp;nbsp;We&amp;nbsp;can&amp;nbsp;assume&amp;nbsp;this&amp;nbsp;is&amp;nbsp;already&amp;nbsp;a&amp;nbsp;draft&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;const&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;result&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #676867&quot;&gt;=&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #ce6700&quot;&gt;caseReducer&lt;/span&gt;(&lt;span style=&quot;color: #6089b4&quot;&gt;draft&lt;/span&gt;,&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;action&lt;/span&gt;)&lt;/div&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;if&lt;/span&gt;&amp;nbsp;(&lt;span style=&quot;color: #676867&quot;&gt;typeof&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;result&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #676867&quot;&gt;===&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #9aa83a&quot;&gt;&#39;undefined&#39;&lt;/span&gt;)&amp;nbsp;{&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;return&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;previousState&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;/div&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;return&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;result&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;as&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #9b0000&quot;&gt;S&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;else&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;if&lt;/span&gt;&amp;nbsp;(&lt;span style=&quot;color: #676867&quot;&gt;!&lt;/span&gt;&lt;span style=&quot;color: #ce6700&quot;&gt;isDraftable&lt;/span&gt;(&lt;span style=&quot;color: #6089b4&quot;&gt;previousState&lt;/span&gt;))&amp;nbsp;{&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9a9b99&quot;&gt;//&amp;nbsp;If&amp;nbsp;state&amp;nbsp;is&amp;nbsp;not&amp;nbsp;draftable&amp;nbsp;(ex:&amp;nbsp;a&amp;nbsp;primitive,&amp;nbsp;such&amp;nbsp;as&amp;nbsp;0),&amp;nbsp;we&amp;nbsp;want&amp;nbsp;to&amp;nbsp;directly&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9a9b99&quot;&gt;//&amp;nbsp;return&amp;nbsp;the&amp;nbsp;caseReducer&amp;nbsp;func&amp;nbsp;and&amp;nbsp;not&amp;nbsp;wrap&amp;nbsp;it&amp;nbsp;with&amp;nbsp;produce.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;const&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;result&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #676867&quot;&gt;=&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #ce6700&quot;&gt;caseReducer&lt;/span&gt;(&lt;span style=&quot;color: #6089b4&quot;&gt;previousState&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;as&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #c7444a&quot;&gt;any&lt;/span&gt;,&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;action&lt;/span&gt;)&lt;/div&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;if&lt;/span&gt;&amp;nbsp;(&lt;span style=&quot;color: #676867&quot;&gt;typeof&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;result&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #676867&quot;&gt;===&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #9aa83a&quot;&gt;&#39;undefined&#39;&lt;/span&gt;)&amp;nbsp;{&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;if&lt;/span&gt;&amp;nbsp;(&lt;span style=&quot;color: #6089b4&quot;&gt;previousState&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #676867&quot;&gt;===&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #408080&quot;&gt;null&lt;/span&gt;)&amp;nbsp;{&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;return&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;previousState&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;throw&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #c7444a&quot;&gt;Error&lt;/span&gt;(&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9aa83a&quot;&gt;&#39;A&amp;nbsp;case&amp;nbsp;reducer&amp;nbsp;on&amp;nbsp;a&amp;nbsp;non-draftable&amp;nbsp;value&amp;nbsp;must&amp;nbsp;not&amp;nbsp;return&amp;nbsp;undefined&#39;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;)&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;/div&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;return&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;result&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;as&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #9b0000&quot;&gt;S&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;else&lt;/span&gt;&amp;nbsp;{&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9a9b99&quot;&gt;//&amp;nbsp;@ts-ignore&amp;nbsp;createNextState()&amp;nbsp;produces&amp;nbsp;an&amp;nbsp;Immutable&amp;lt;Draft&amp;lt;S&amp;gt;&amp;gt;&amp;nbsp;rather&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9a9b99&quot;&gt;//&amp;nbsp;than&amp;nbsp;an&amp;nbsp;Immutable&amp;lt;S&amp;gt;,&amp;nbsp;and&amp;nbsp;TypeScript&amp;nbsp;cannot&amp;nbsp;find&amp;nbsp;out&amp;nbsp;how&amp;nbsp;to&amp;nbsp;reconcile&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9a9b99&quot;&gt;//&amp;nbsp;these&amp;nbsp;two&amp;nbsp;types.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;return&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #ce6700&quot;&gt;createNextState&lt;/span&gt;(&lt;span style=&quot;color: #6089b4&quot;&gt;previousState&lt;/span&gt;,&amp;nbsp;(&lt;span style=&quot;color: #6089b4&quot;&gt;draft&lt;/span&gt;&lt;span style=&quot;color: #676867&quot;&gt;:&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #9b0000&quot;&gt;Draft&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: #9b0000&quot;&gt;S&lt;/span&gt;&amp;gt;)&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;=&amp;gt;&lt;/span&gt;&amp;nbsp;{&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;return&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #ce6700&quot;&gt;caseReducer&lt;/span&gt;(&lt;span style=&quot;color: #6089b4&quot;&gt;draft&lt;/span&gt;,&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;action&lt;/span&gt;)&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;})&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;/div&gt;&lt;br&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: #9872a2&quot;&gt;return&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;previousState&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;},&amp;nbsp;&lt;span style=&quot;color: #6089b4&quot;&gt;state&lt;/span&gt;)&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;}&lt;/div&gt;&lt;/div&gt;&lt;/h1&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;fillOpacity=59;arcSize=12;imageAspect=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="1230" y="60" width="740" height="1080" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-84" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#4D4D4D;strokeWidth=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="nkPAldrCDChmKuOqDMVw-77">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="710" y="1220" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-226" value="&lt;div style=&quot;color: rgb(197 , 200 , 198) ; font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;result&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(103 , 104 , 103)&quot;&gt;=&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(206 , 103 , 0)&quot;&gt;recipe&lt;/span&gt;(&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;proxy&lt;/span&gt;)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;strokeColor=#82b366;fillColor=#d5e8d4;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="640" y="2310" width="250" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-227" value="&lt;span style=&quot;font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px&quot;&gt;&amp;nbsp;leaveScope(scope) || revokeScope(scope)&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;strokeColor=#82b366;fillColor=#d5e8d4;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="640" y="2350" width="325" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-231" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;jumpSize=5;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#4D4D4D;strokeWidth=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="nkPAldrCDChmKuOqDMVw-229" target="nkPAldrCDChmKuOqDMVw-230">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-229" value="&lt;div style=&quot;color: rgb(197 , 200 , 198) ; font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;color: rgb(103 , 104 , 103)&quot;&gt;typeof&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(199 , 68 , 74)&quot;&gt;Promise&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(103 , 104 , 103)&quot;&gt;!==&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(154 , 168 , 58)&quot;&gt;&quot;undefined&quot;&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(103 , 104 , 103)&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;result&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(103 , 104 , 103)&quot;&gt;instanceof&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(155 , 0 , 0)&quot;&gt;Promise&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;strokeColor=#82b366;fillColor=#d5e8d4;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="680" y="2420" width="530" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-230" value="&lt;font color=&quot;rgba(0, 0, 0, 0)&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px&quot;&gt;result&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px&quot;&gt;then(result=&amp;gt; {...})&lt;/span&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=0;shadow=0;strokeColor=#82b366;fillColor=#d5e8d4;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="1430" y="2410" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-232" value="&lt;div style=&quot;color: rgb(197 , 200 , 198) ; font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;color: rgb(206 , 103 , 0)&quot;&gt;usePatchesInScope&lt;/span&gt;(&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;scope&lt;/span&gt;,&amp;nbsp;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;patchListener&lt;/span&gt;)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;strokeColor=#82b366;fillColor=#d5e8d4;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="640" y="2480" width="340" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-233" value="&lt;div style=&quot;color: rgb(197 , 200 , 198) ; font-family: &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 14px ; line-height: 19px&quot;&gt;&lt;span style=&quot;color: rgb(152 , 114 , 162)&quot;&gt;return&lt;/span&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(206 , 103 , 0)&quot;&gt;processResult&lt;/span&gt;(&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;result&lt;/span&gt;,&amp;nbsp;&lt;span style=&quot;color: rgb(96 , 137 , 180)&quot;&gt;scope&lt;/span&gt;)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;strokeColor=#82b366;fillColor=#d5e8d4;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="640" y="2540" width="340" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-235" value="创建代理：&amp;nbsp;const proxy = createProxy(this, base, undefined)" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;strokeColor=#82b366;fillColor=#d5e8d4;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="640.0000000000001" y="2250" width="231.34" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nkPAldrCDChmKuOqDMVw-236" value="创建范围： const scope = enter(acope)" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;strokeColor=#82b366;fillColor=#d5e8d4;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="640" y="2180" width="231.34" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
